<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="description" content="Les principes de bases de la gestion des exceptions">
<meta name="author" content="OCapuozzo">
<title>Gestion des exceptions</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
<h1>Gestion des exceptions</h1>
<div class="details">
<span id="author" class="author">OCapuozzo</span><br>
<span id="revnumber">version 1.0,</span>
<span id="revdate">2020-04-13</span>
<br><span id="revremark">Version asciidoc</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table des matieres</div>
<ul class="sectlevel1">
<li><a href="#_présentation">Présentation</a></li>
<li><a href="#_introdution">Introdution</a>
<ul class="sectlevel3">
<li><a href="#_principe_de_programmation">Principe de programmation</a></li>
<li><a href="#_règles_de_programmation">Règles de programmation</a></li>
<li><a href="#_exemple">Exemple</a></li>
<li><a href="#_notion_de_contrat">Notion de contrat</a></li>
<li><a href="#_quand_le_contrat_est_rompu">Quand le contrat est rompu</a>
<ul class="sectlevel3">
<li><a href="#_comment_ça_marche">Comment ça marche ?</a></li>
</ul>
</li>
<li><a href="#_les_raisons_dun_échec">Les raisons d&#8217;un échec</a>
<ul class="sectlevel3">
<li><a href="#_rupture_du_contrat_par_le_client">Rupture du contrat par le client</a></li>
<li><a href="#_rupture_du_contrat_par_le_fournisseur">Rupture du contrat par le fournisseur</a></li>
</ul>
</li>
<li><a href="#_comment_gérer_les_exceptions">Comment gérer les exceptions ?</a>
<ul class="sectlevel3">
<li><a href="#_propager_lexception">PROPAGER L&#8217;EXCEPTION</a></li>
<li><a href="#_traiter_silencieusement_le_problème">TRAITER SILENCIEUSEMENT LE PROBLÈME</a></li>
<li><a href="#_traiter_le_probleme_et_declencher_une_exception">TRAITER LE PROBLEME ET DECLENCHER UNE EXCEPTION</a></li>
</ul>
</li>
<li><a href="#_exemples">Exemples</a>
<ul class="sectlevel3">
<li><a href="#_kotlin">Kotlin</a></li>
<li><a href="#_tests_unitaires">Tests unitaires</a></li>
<li><a href="#_js">JS</a></li>
</ul>
</li>
<li><a href="#_contre_exemple_mauvaise_pratique">Contre exemple (mauvaise pratique)</a></li>
<li><a href="#_références">Références</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_présentation">Présentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="images/cogitas.png" alt="cogitas" width="200" title="cogitas"></span></p>
</div>
<div class="paragraph">
<p>Le mécanisme des exceptions fait écho au concept de <em>design by contrat</em> de Bertrand Meyer.</p>
</div>
<div class="paragraph">
<p><em>La programmation par contrat (en anglais, design by contract ou DBC) est un paradigme de programmation dans lequel le déroulement des traitements est régi par des règles. Ces règles, appelées des assertions, forment un contrat qui précise les responsabilités entre le client et le fournisseur d&#8217;un morceau de code logiciel. C&#8217;est une méthode de programmation semi-formelle dont le but principal est de réduire le nombre de bugs dans les programmes.</em> (<a href="https://fr.wikipedia.org/wiki/Programmation_par_contrat" class="bare">https://fr.wikipedia.org/wiki/Programmation_par_contrat</a>)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introdution">Introdution</h2>
<div class="sectionbody">
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>Une <strong>exception</strong> est un événement déclenché par une erreur survenant à l&#8217;exécution.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Une exception est la manifestation d&#8217;un bogue, le signe qu&#8217;une opération s&#8217;est interrompue anormalement.</p>
</div>
<div class="sect3">
<h4 id="_principe_de_programmation">Principe de programmation</h4>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Pas de retour pour les bogues</strong></p>
</div>
<div class="paragraph">
<p>Une opération qui ne peut pas réaliser sa fonction ne doit pas retourner à l&#8217;appelant.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ce principe est à rapprocher que le qualité première d&#8217;une fonction : <strong><a href="https://ocapuozzo.github.io/qualite-logiciel/#correction">la correction</a></strong>. Une fonction (au sens large) ne pouvant pas réaliser le travail pour laquelle elle s&#8217;est engagée, doit déclarer forfait.</p>
</div>
<div class="paragraph">
<p>Les langages d&#8217;aujourd&#8217;hui fournissent un moyen d&#8217;adhérer à ce princpe, en fournissant <strong>un canal de retour dédié aux exceptions</strong>. L&#8217;erreur est alors canalisée, puis traitée avec plus ou moins de bonheur.</p>
</div>
</div>
<div class="sect3">
<h4 id="_règles_de_programmation">Règles de programmation</h4>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><strong>R1</strong> : Une fonction (appelée - le fournisseur -) qui ne peut réaliser son contrat ne doit pas retourner à l&#8217;appelant, mais utiliser pour cela le canal des exceptions offerts par les langages de programmation.</p>
</li>
<li>
<p><strong>R2</strong> : La fonction appelante (le client) ne doit pas appeler une fonction si elle n&#8217;en remplit pas les conditions d&#8217;utilisation (pré-conditions).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_exemple">Exemple</h4>
<div class="paragraph">
<p>Nous souhaitons, dans un formulaire en cours d&#8217;exécution, pouvoir changer l&#8217;image du produit courant. Pour cela nous créons une méthode qui reçoit le nom d&#8217;une image (un nom de fichier) et qui place celle-ci dans un label.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Formulaire</span> <span style="color:#088;font-weight:bold">extends</span> <span style="color:#0a8;font-weight:bold">JFrame</span> {
<span style="color:#088;font-weight:bold">private</span>
<span style="color:#0a8;font-weight:bold">JLabel</span> lbnomProduit;

  <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> changeImage(<span style="color:#0a8;font-weight:bold">String</span> nomFicImage){
    <span style="color:#0a8;font-weight:bold">ImageIcon</span> icon = <span style="color:#069">null</span>;
    java.net.URL iconURL = <span style="color:#0a8;font-weight:bold">ClassLoader</span>.getSystemResource(nomFicImage);
    icon = <span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">ImageIcon</span>(iconURL);
    lbnomProduit.setIcon(icon);
  }
  . . .
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Isolons une instruction :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/appelant-le.png" alt="appelant le">
</div>
</div>
<div class="paragraph">
<p>Notre méthode <code>changeImage</code> a un objectif bien précis : placer une image dans un label. Pour réaliser cette tâche, elle délègue à un objet de la classe <code>ImageIcon</code> le soin de charger l&#8217;image en mémoire.</p>
</div>
<div class="paragraph">
<p>A cet instant précis, la méthode <code>changeImage</code> agit en tant que client (l'<strong>appelant</strong>) et l&#8217;objet de type <code>ImageIcon</code> en tant que fournisseur de service (l'<strong>appelé</strong>). Situation rien de plus banale.</p>
</div>
<div class="paragraph">
<p>Comme dans toute relation client-fournisseur, il existe un contrat entre les parties. Dans une telle relation, chacune des parties assume ses obligations et peut faire valoir ses droits.</p>
</div>
</div>
<div class="sect2">
<h3 id="_notion_de_contrat">Notion de contrat</h3>
<div class="paragraph">
<p>Revenons sur l&#8217;analogie client-fournisseur. Un contrat lie client et fournisseur.</p>
</div>
<div class="paragraph">
<p>Exemples de contrat : <em>Si vous commandez ce produit avant 18h, nous vous garantissons une livraison chez vous le lendemain</em></p>
</div>
<div class="paragraph">
<p>Bien sur, les contrats peuvent être bien plus complexes : contrat de travail, contrat de mariage, contrat de construction d&#8217;une maison etc.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<div class="title">Définition d&#8217;un contrat</div>
<p>Le principe de conception par contrat est dérivé de la notion légale de contrat : <strong>chacune des parties qui respecte ses obligations est en droit de faire valoir ses droits</strong>.</p>
</div>
<div class="paragraph">
<p>En terme de programmation, un objet est responsable de l&#8217;exécution des services dont il a la charge (ses obligations) si et seulement si certaines conditions sont remplies (ses droits).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les obligations et droits sont représentés en UML par des pré et post conditions.</p>
</div>
<div class="paragraph">
<p>Les définitions suivantes, sont extraites du livre "Conception et programation orientées objet" de Bertrand Meyer (p. 335).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>La <strong>précondition</strong> s&#8217;impose au client. Elle défine les conditions selon lesquelles un appel de méthode est légitime. C&#8217;est une obligation pour le client et un droit pour le fournisseur.</p>
</li>
<li>
<p>La <strong>postcondition</strong> définit les conditions qui doivent être vérifiées par la méthode au retour de son appel. C&#8217;est un droit pour le client et une obligation pour le fournisseur.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Contrairement à ce qui se pratique parfois, <strong>le fournisseur définit seul les termes du contrat, pas de négociation possible</strong> !</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Exemple de contrat relatif au constructeur ImageIcon de notre exemple.</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Obligations</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Droits</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Client</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(pré-condition)</p>
<p class="tableblock">Doit fournir un chemin valide correspondant à un fichier image correct</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S&#8217;attend à obtenir une référence valide à un objet ImageIcon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Fournisseur</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(post-condition)</p>
<p class="tableblock">S&#8217;engage à retourner une référence à une instance de <code>ImageIcon</code> valide en mémoire</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S&#8217;attend à recevoir un chemin exploitable vers un fichier image.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_quand_le_contrat_est_rompu">Quand le contrat est rompu</h3>
<div class="paragraph">
<p>Un contrat rompu est synonyme de bogue : l&#8217;une des deux parties n&#8217;a pas été en mesure de respecter son contrat.</p>
</div>
<div class="paragraph">
<p>Dans le but de répondre à cette problématique, certains langages de programmation proposent un mécanisme de gestion des contrats.</p>
</div>
<div class="paragraph">
<p>Toute fois, il arrive que les spécifications des contrats (pré et post conditions) ne soient présentes que sous la forme de commentaires dans la documentation (documentation de l&#8217;API).</p>
</div>
<div class="paragraph">
<p>Les langages modernes proposent au minimum un mécanisme appelé <em>gestion des exceptions</em>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<div class="title"><strong>Exception</strong></div>
<p>Événement déclenché par une opération qui s&#8217;est trouvée dans l&#8217;impossibilité de réaliser son contrat.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_comment_ça_marche">Comment ça marche ?</h4>
<div class="paragraph">
<p>Lorsqu&#8217;une exception est déclenchée, un <strong>saut brutal arrière</strong> est effectué vers <strong>le premier gestionnaire <code>try/catch</code> intéressé par l&#8217;exception</strong>, en remontant la chaîne des appels.</p>
</div>
<div class="paragraph">
<p>Ainsi si aucun gestionnaire <code>try/catch</code> ne filtre l&#8217;exception en train de remonter, elle atteindra la fonction d&#8217;entrée du programme (le <em>main</em>) arrêtant du même coup celui-ci, dans le cas d&#8217;une application web, retourne un code erreur 500&#8230;&#8203;</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/erreur-500.png" alt="erreur 500">
</div>
</div>
<div class="paragraph">
<p>Situation qu&#8217;il est préférable d&#8217;éviter !</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_les_raisons_dun_échec">Les raisons d&#8217;un échec</h3>
<div class="sect3">
<h4 id="_rupture_du_contrat_par_le_client">Rupture du contrat par le client</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
NON RESPECT DU CONTRAT D&#8217;UTILISATION D&#8217;UNE API
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Le code client tente quelque chose non autorisée par l&#8217;API, et viole ainsi son contrat.</p>
</div>
<div class="paragraph">
<p>La violation la plus courante consiste à passer des valeurs <code>null</code> comme argument à des méthodes qui attendent des références à des objets en mémoire !  Le client reçoit le plus souvent une exception de type <code>NullPointerException</code>, bien connu des développeurs java.</p>
</div>
<div class="paragraph">
<p>C&#8217;est une situation que le client devrait éviter !!</p>
</div>
<div class="paragraph">
<p>Il existe cependant des situations où il est très difficile de vérifier des prérequis.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<div class="title">Cas d&#8217;un déclenchement à l&#8217;aveugle</div>
<p>C&#8217;est un cas très particulier, qui consiste à lancer un traitement en utilisant des données hors de contrôle. La présence même d&#8217;une exception dans le traitement du fournisseur informe le programme client de la nature des données transmises. Il peut également adopter une solution de rechange, s&#8217;il obtient des informations utiles fournies dans l&#8217;exception.</p>
</div>
<div class="paragraph">
<p>Par exemple : Une exception est levée lors de l&#8217;analyse d&#8217;un document XML. On apprend alors que ce document n&#8217;est pas valide. L&#8217;exception contient des informations utiles sur l&#8217;emplacement dans le document XML qui provoque le problème. Le client peut alors utiliser cette information pour prendre des mesures de récupération.</p>
</div>
<div class="paragraph">
<p>En général, un algorithme ne devrait pas s&#8217;appuyer sur la survenue ou non d&#8217;une exception, ce cas doit être exceptionnel, car une exception est coûteuse (mémoire,
traitement) et si elle peut être éviter à moindre frais autant le faire !</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rupture_du_contrat_par_le_fournisseur">Rupture du contrat par le fournisseur</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
ECHEC DU SERVICE APPELÉ
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_raison_1_bug_dû_à_une_erreur_de_programmation">Raison 1 : BUG dû à une erreur de programmation</h5>
<div class="ulist">
<ul>
<li>
<p>Si c&#8217;est votre code&#8230;&#8203; vous devez le corriger !</p>
</li>
<li>
<p>Si c&#8217;est dû à un problème d&#8217;implémentation d&#8217;une API tierce (bug dans une fonction
d&#8217;une bibliothèque), situation rare, il n&#8217;y a souvent pas grand chose à faire, si ce
n&#8217;est de déclarer ce bug à la communauté et, en attendant sa correction, de
chercher à le contourner (à moins que vous proposiez un correctif – cas des
solutions open source).</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_raison_2_echec_dans_lobtention_de_ressources_nécessaires_au_service">Raison 2 : ECHEC dans l&#8217;obtention de ressources nécessaires au service</h5>
<div class="paragraph">
<p>L&#8217;application ne peut plus faire son travail et doit donc se terminer proprement
(libérer les ressources utilisées, fermer les connexions, etc.) et informer l&#8217;appelant
de la cause du problème (fichier introuvable, réseau inaccessible…) mais pas
toujours (question de sécurité : l&#8217;appelant peut parfois être mal intentionné&#8230;&#8203;)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_comment_gérer_les_exceptions">Comment gérer les exceptions ?</h3>
<div class="paragraph">
<p>Face à l&#8217;éventualité d&#8217;un déclenchement d&#8217;exception, le développeur a le choix de traiter le problème ou non ! 3 possibilités en fait :</p>
</div>
<div class="sect3">
<h4 id="_propager_lexception">PROPAGER L&#8217;EXCEPTION</h4>
<div class="paragraph">
<p>Ne pas traiter le problème en renvoyant la responsabilité à l&#8217;appelant. Cette technique
consiste à propager l&#8217;exception en utilisant le mot clé <code>throws</code></p>
</div>
<div class="paragraph">
<p>Propager l&#8217;exception c&#8217;est <strong>renvoyer à l&#8217;appelant la gestion du problème</strong>, en l&#8217;avertissant
qu&#8217;une exception est susceptible de survenir (via une déclaration <code>throws</code> dans l&#8217;interface en java, ou <code>throw new Exception</code> dans le corps de la méthode).</p>
</div>
<div class="paragraph">
<p>Exemple de déclaration de cette logique:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#777">// prévenir que cette fonction est susceptible de générer une exception (SqlException)</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> insertIntoTable(<span style="color:#0a8;font-weight:bold">Connection</span> con, <span style="color:#0a8;font-weight:bold">String</span> table) <span style="color:#088;font-weight:bold">throws</span> SqlException</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_traiter_silencieusement_le_problème">TRAITER SILENCIEUSEMENT LE PROBLÈME</h4>
<div class="paragraph">
<p>Traiter le problème localement, sans en avertir l&#8217;appelant.</p>
</div>
<div class="paragraph">
<p>Traiter l&#8217;exception c&#8217;est l&#8217;intercepter dans le corps de la fonction et changer de stratégie. Cela s&#8217;opère avec les mots clés <strong>try</strong>, <strong>catch</strong>, <strong>finally</strong>. La clause <strong>catch</strong> permet de filtrer les classes d&#8217;exception. Attention, le filtrage des classes se réalise séquentiellement, dans l&#8217;ordre des déclarations des blocs catch. Donc le filtrage doit partir des classes filles vers la classe mère. En effet, le catch s&#8217;arrête dès que la classe de l&#8217;exception est compatible une classe déclarer dans la séquence de catch. Attention, une clause <strong>try</strong> doit au moins être associée à une clause <strong>catch</strong>. La clause <strong>finally</strong> est optionnelle, son bloc est "assuré" d&#8217;être exécuté, qu&#8217;il y ait eu une exception ou non.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/code-java-try-cat-ch-finally.png" alt="code java try cat ch finally">
</div>
</div>
<div class="paragraph">
<p>Le filtre se base sur la hiérarchie des classes, du plus spécialisé jusqu&#8217;à une classe de base (le plus souvent la classe <code>Exception</code>)</p>
</div>
<div class="sect4">
<h5 id="_extrait_dune_hiérarchie_de_classes_dexception">Extrait d&#8217;une hiérarchie de classes d&#8217;exception</h5>
<div class="paragraph">
<p><span class="image"><img src="images/heritage-exceptions.png" alt="heritage exceptions"></span></p>
</div>
<div class="paragraph">
<p>En Java, les sous classes de type <code>RuntimeException</code> sont les plus courantes, le développeur est tenu de les éviter sans pour autant, systématiquement avoir recours à un gestionnaire d&#8217;exceptions.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_traiter_le_probleme_et_declencher_une_exception">TRAITER LE PROBLEME ET DECLENCHER UNE EXCEPTION</h4>
<div class="paragraph">
<p>Traiter en partie le problème localement et propager une exception métier (à l&#8217;appelant
donc). Exemple :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> changerPhotoTrombino(<span style="color:#0a8;font-weight:bold">String</span> nomImage)
          <span style="color:#088;font-weight:bold">throws</span> ChangementPhotoImpossibleException {
  <span style="color:#080;font-weight:bold">try</span> {
    <span style="color:#777">// tentative de chargement et remplacement de l'image</span>
  }<span style="color:#080;font-weight:bold">catch</span> (<span style="color:#C00;font-weight:bold">FileNotFoundException</span> e){
    <span style="color:#777">// marquer la photo actuelle comme obsolète, puis</span>
    <span style="color:#080;font-weight:bold">throw</span> <span style="color:#080;font-weight:bold">new</span> ChangementPhotoImpossibleException(e.getMessage());
  }<span style="color:#080;font-weight:bold">finally</span> {
    <span style="color:#777">// fin de l'opération, inscription dans un fichier de log</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La classe <code>ChangementPhotoImpossibleException</code> est une sous-classe de Exception
que vous devez concevoir, l&#8217;appelant ayant la charge de la gestion de ses instances
éventuelles.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>L&#8217;instruction <code>throw new &lt;classe d&#8217;exception&gt;</code> est un <strong>déclencheur</strong> d&#8217;exception (technique ou métier).</p>
</div>
<div class="paragraph">
<p>Le bloc <code>finally</code> sera tout de même exécuté.</p>
</div>
<div class="paragraph">
<p>C&#8217;est le comportement général des gestionnaires d&#8217;exception des langages de programmation.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exemples">Exemples</h3>
<div class="sect3">
<h4 id="_kotlin">Kotlin</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">// class Controller

    // réponse directe au client (sans vue)
    @GetMapping(&quot;/demo-ge&quot;)
    fun demoException(response: HttpServletResponse) {
        response.contentType = &quot;text/plain&quot;
        response.characterEncoding = &quot;UTF-8&quot;
        val tab1 = intArrayOf(2, 3, 0, 1, 7)
        val tab2 = intArrayOf(2, 2, 2, 2, 2)
        val tab3 = intArrayOf() // vide
        val tab4 = intArrayOf(2, -3, 4, 1, 7)
        val tabOfTab = arrayListOf&lt;IntArray&gt;(tab1, tab2, tab3, tab4)
        val writer: PrintWriter = response.getWriter()
        writer.println(&quot;Test de la fonction min&quot;)
        for (tab  in  tabOfTab){
            try {
                writer.println(&quot;le minmum de tab = &quot; + min(tab))
            } catch (e: IllegalArgumentException) {
                writer.println(&quot;ERREUR : &quot; + e.message)
            }
        }
        writer.println(&quot;Fin du test.&quot;);
    }

// Fonction utilitaire (sans classe)

/**
 * Obtenir la valeur minimum d'une liste
 *
 * @param list d'entiers
 * @return la valeur minimale de la liste
 * @throws IllegalArgumentException si liste est vide
 */
@Throws(IllegalArgumentException::class)
fun min(list: IntArray): Int {
    if (list.isEmpty()) {
        throw IllegalArgumentException(&quot;min sur liste vide IMPOSSIBLE&quot;)
    }
    var minNb: Int = list[0]

    for (i in list.indices) {
        if (minNb &gt; list[i]) minNb = list[i]
    }
    return minNb
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exemple de résultat :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/demo-ge-run.png" alt="demo ge run">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tests_unitaires">Tests unitaires</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">package fr.vincimelun.sbfirst

import fr.vincimelun.sbfirst.controller.min
import org.junit.jupiter.api.Assertions.*
import org.junit.jupiter.api.Test
import java.lang.IllegalArgumentException

class UnitTests constructor() {

    @Test
    fun `minimum tab normal`() {
        val tab1 = intArrayOf(2, 3, 0, 1, 7)
        val tab2 = intArrayOf(2, 2, 2, 2, 2)
        val min: Int = min(tab2)
        assertEquals(0, min(tab1))
        assertEquals(2, min)
    }

    @Test
    fun `minimum tab vide`() {
        val tabVide = intArrayOf()
        try {
            val min: Int = min(tabVide)
            fail(&quot;Ne devrait pas passer par là&quot;)
        }catch (e: IllegalArgumentException) {
            assertTrue(1==1) // Tautologie pour le fun :)
        }

    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_js">JS</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td>
  <td class="code"><pre><span style="color:#080;font-weight:bold">function</span> <span style="color:#06B;font-weight:bold">f</span>() {
 <span style="color:#080;font-weight:bold">try</span> {
   console.log(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">instuction 1</span><span style="color:#710">&quot;</span></span>)
   console.log(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">instuction 2</span><span style="color:#710">&quot;</span></span>)
   <span style="color:#080;font-weight:bold">throw</span> <span style="color:#080;font-weight:bold">new</span> Error(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">exception 1</span><span style="color:#710">&quot;</span></span>)
   console.log(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">instuction 3</span><span style="color:#710">&quot;</span></span>)
 }
 <span style="color:#080;font-weight:bold">catch</span>(e) {
   console.log(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">e attrapée : </span><span style="color:#710">&quot;</span></span> + e)
   <span style="color:#080;font-weight:bold">throw</span> <span style="color:#080;font-weight:bold">new</span> Error(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">exception 2</span><span style="color:#710">&quot;</span></span>)
 }
 <span style="color:#080;font-weight:bold">finally</span> {
   console.log(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">dans le finally</span><span style="color:#710">&quot;</span></span>)
 }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Au lancement de la fonction, nous obtenons :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre>[LOG]: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">instuction 1</span><span style="color:#710">&quot;</span></span>
[LOG]: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">instuction 2</span><span style="color:#710">&quot;</span></span>
[LOG]: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">e attrapée : Error: exception 1</span><span style="color:#710">&quot;</span></span>
[LOG]: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">dans le finally</span><span style="color:#710">&quot;</span></span>
[ERR]: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Executed JavaScript Failed:</span><span style="color:#710">&quot;</span></span>
[ERR]: exception <span style="color:#00D">2</span>
</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Exemple de résultat :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/try-catch-js.png" alt="try catch js">
</div>
</div>
<div class="paragraph">
<p>N&#8217;ayant pas déclaré de gestionnaire <code>try&#8230;&#8203;catch</code> pour gérer l&#8217;exception 2, le programme s&#8217;arrête brutalement, <strong>après avoir traité le bloc finally du premier gestionnaire</strong>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contre_exemple_mauvaise_pratique">Contre exemple (mauvaise pratique)</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Utiliser un gestionnaire d&#8217;exception (<code>try &#8230;&#8203; catch</code>) alors qu&#8217;il est possible de poser une condition peu couteuse !</p>
<div class="listingblock">
<div class="title">Listing 1. Exemple</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">/**
 * Obtenir la valeur minimum d'une liste
 *
 * @param list d'entiers
 * @return la valeur minimale
 * @throws IllegalArgumentException si liste est vide
 */
@Throws(IllegalArgumentException::class)
fun min(list: IntArray): Int {
    try {
        var minNb: Int = list[0]

        for (i in list.indices) {
            if (minNb &gt; list[i]) minNb = list[i]
        }
        return minNb
    } catch (e: ArrayIndexOutOfBoundsException) {
        throw IllegalArgumentException(&quot;min sur liste vide IMPOSSIBLE&quot;)
    }
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>À comparer avec la version précédente. Le résultat est le même, mais pas le coût en ressources (le coût de <code>try&#8230;&#8203;catch</code> n&#8217;est pas null ! )</p>
</div>
</div>
<div class="sect2">
<h3 id="_références">Références</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://fr.wikipedia.org/wiki/Programmation_par_contrat" class="bare">https://fr.wikipedia.org/wiki/Programmation_par_contrat</a> (design by contrat)</p>
</li>
<li>
<p><a href="http://onjava.com/pub/a/onjava/2003/11/19/exceptions.html" class="bare">http://onjava.com/pub/a/onjava/2003/11/19/exceptions.html</a></p>
</li>
<li>
<p>"Does Java need Checked Exceptions?" by Bruce Eckel</p>
</li>
<li>
<p>"Conception et programmation orientées objet" de Bertrand Meyer (ed. Eyrolles).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0<br>
Last updated 2021-12-10 07:50:48 +0100
</div>
</div>
</body>
</html>